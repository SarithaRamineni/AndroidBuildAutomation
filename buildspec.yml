version: 0.2

env:
  variables:
	PROJECT_DIR='/home/ubuntu/AndroidBuildAutomationSample/'
    OUTPUT_DIR='/home/ubuntu/AndroidBuildAutomationSample/app/build/outputs/apk/debug'


phases:
  pre_build:
    commands:
	  - echo "Before Building the application"
	  - cd $PROJECT_DIR
	  - chmod +x ./gradlew
  build:
    commands:
	  - echo "Build process start for Android application"
	  - echo "Cleaning.."
	  - ./gradlew clean
	  - echo "cleanBuildCache.."
	  - ./gradlew cleanBuildCache
	  - echo "Build .. "
	  - ./gradlew build
	  - echo "assembleDebug.."
      - ./gradlew assembleDebug
  post_build:
    commands:
	  - echo "Build completed"
	  
artifacts:
  files:
     - echo "Copy APK to output folder"
     - './android/app/build/outputs/**/*.apk'
  discard-paths: yes
  
 